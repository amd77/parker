{% extends "common/parker.html" %}
{% load crispy_forms_tags %}

{% block extra_head %}
<style>
.superbig { font-size: 250%; }
.big { font-size: 200%; }
.big input { width: 5em; }
</style>
{% endblock extra_head %}

{% block body %}
<h1>
    {{day|date:"D d F Y"}}
    <div class="btn-group pull-right" role="group" aria-label="modo">
        {% if previous_day %}
        <a href="{% url 'estadisticas_day' previous_day.year previous_day.month previous_day.day cuales %}" class="btn btn-default"><i class="glyphicon glyphicon-backward"></i> día anterior</a>
        {% endif %}
        <a href="{% url 'estadisticas_day' day.year day.month day.day 'todas' %}" class="btn btn-default {% if cuales == 'todas' %}active{% endif %}"><i class="glyphicon glyphicon-question-sign"></i> Todas</a>
        <a href="{% url 'estadisticas_day' day.year day.month day.day 'fuera' %}" class="btn btn-default {% if cuales == 'fuera' %}active{% endif %}"><i class="glyphicon glyphicon-remove-sign"></i> Informal</a>
        <a href="{% url 'estadisticas_day' day.year day.month day.day 'caja' %}" class="btn btn-default {% if cuales == 'caja' %}active{% endif %}"><i class="glyphicon glyphicon-ok-sign"></i> Solo cerradas</a>
        {% if next_day %}
        <a href="{% url 'estadisticas_day' next_day.year next_day.month next_day.day cuales %}" class="btn btn-default">día siguiente <i class="glyphicon glyphicon-forward"></i></a>
        {% endif %}
    </div>
</h1>
<table class="table">
    <thead>
        <tr>
            <th>Num</th>
            <th>Codigo</th>
            <th>Hora entrada</th>
            <th>Hora salida</th>
            <th>Tiempo</th>
            <th>Minutos</th>
            <th>€</th>
            <th>operario</th>
            <th>abonado</th>
            <th></th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        {% for object in object_list %}
        <tr>
            <td>{{forloop.counter}}</td>
            <td>{{object.codigo}}</td>
            <td>{{object.fecha_post|date:'H:i:s'}}</td>
            <td>{{object.salida.fecha|date:'H:i:s'}}</td>
            <td>{{object.salida.minutos_str}}</td>
            <td>{{object.salida.minutos|floatformat:0}}</td>
            <td>{{object.salida.euros|floatformat:2}}</td>
            <td>{{object.salida.operario.user.username}}</td>
            <td>{{object.salida.abonado|default:""}}</td>
            <td>{% if object.salida.perdido %}<a title="Ticket olvidado"><i class="glyphicon glyphicon-film"></i></a>{% endif %}</td>
            <td>{% if object.salida.fecha_caja %}<a title="Cierre de caja"><i class="glyphicon glyphicon-ok"></i></a>{% endif %}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock body %}
